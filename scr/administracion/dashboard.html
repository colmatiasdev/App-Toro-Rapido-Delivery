<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Toro Rápido</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Bungee&family=Inter:wght@400;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="dashboard.css">
</head>
<body>
    <main class="dashboard">
        <section class="login-card" id="login-card">
            <div class="login-header">
                <div class="dash-icon"><i class="fa-solid fa-lock"></i></div>
                <h1>Acceso al Dashboard</h1>
                <p>Ingresá tus credenciales para continuar.</p>
            </div>
            <form class="login-form" id="login-form">
                <label class="field">
                    <span>Usuario</span>
                    <input type="text" id="login-user" placeholder="admin" autocomplete="username" required>
                </label>
                <label class="field">
                    <span>Contraseña</span>
                    <input type="password" id="login-pass" placeholder="admin" autocomplete="current-password" required>
                </label>
                <button class="dash-btn" type="submit">Ingresar</button>
                <div class="login-error" id="login-error">Usuario o contraseña incorrectos.</div>
            </form>
        </section>

        <section class="dashboard-content" id="dashboard-content" aria-hidden="true">
            <header class="dashboard-header">
                <h1>Panel de Administración</h1>
                <p>Accesos rápidos para configurar y operar tu negocio.</p>
            </header>

            <section class="dashboard-grid">
                <article class="dash-card">
                    <div class="dash-icon"><i class="fa-solid fa-gear"></i></div>
                    <h2>Configuración</h2>
                    <p>Editá variables globales como WhatsApp, envíos y límites.</p>
                    <a class="dash-btn" href="../../config.js" target="_blank">Abrir config.js</a>
                </article>

                <article class="dash-card">
                    <div class="dash-icon"><i class="fa-solid fa-layer-group"></i></div>
                    <h2>Admin Menú</h2>
                    <p>Visualizá los ítems del menú desde el Sheet.</p>
                    <a class="dash-btn" href="admin-menu/admin-menu.html">Abrir admin menú</a>
                </article>

                <article class="dash-card">
                    <div class="dash-icon"><i class="fa-solid fa-utensils"></i></div>
                    <h2>Menú (Vista pública)</h2>
                    <p>Visualizá cómo se verá el menú publicado.</p>
                    <a class="dash-btn" href="../menu/menu.html">Ver menú publicado</a>
                </article>

                <article class="dash-card">
                    <div class="dash-icon"><i class="fa-solid fa-receipt"></i></div>
                    <h2>Pedidos</h2>
                    <p>Gestioná pedidos y datos de entrega.</p>
                    <a class="dash-btn" href="../pedidos/pedidos.html">Ir a pedidos</a>
                </article>
            </section>

            <a class="back-home" href="../../index.html">
                <i class="fa-solid fa-chevron-left"></i> Volver al inicio
            </a>
            <button class="logout-btn" id="logout-btn" type="button">
                <i class="fa-solid fa-right-from-bracket"></i> Cerrar sesión
            </button>
        </section>
    </main>

    <script>
        const AUTH_KEY = "toro_admin_auth";
        const loginForm = document.getElementById("login-form");
        const loginUser = document.getElementById("login-user");
        const loginPass = document.getElementById("login-pass");
        const loginError = document.getElementById("login-error");
        const loginCard = document.getElementById("login-card");
        const dashboardContent = document.getElementById("dashboard-content");
        const logoutBtn = document.getElementById("logout-btn");

        const showDashboard = () => {
            if (loginError) loginError.style.display = "none";
            if (loginCard) loginCard.style.display = "none";
            if (dashboardContent) {
                dashboardContent.style.display = "block";
                dashboardContent.setAttribute("aria-hidden", "false");
            }
        };

        const showLogin = () => {
            if (loginCard) loginCard.style.display = "grid";
            if (dashboardContent) {
                dashboardContent.style.display = "none";
                dashboardContent.setAttribute("aria-hidden", "true");
            }
        };

        try {
            if (sessionStorage.getItem(AUTH_KEY) === "1") {
                showDashboard();
            } else {
                showLogin();
            }
        } catch (e) {
            showLogin();
        }

        loginForm?.addEventListener("submit", (event) => {
            event.preventDefault();
            const user = loginUser?.value.trim() || "";
            const pass = loginPass?.value.trim() || "";
            const ok = user === "admin" && pass === "admin";
            if (!ok) {
                if (loginError) loginError.style.display = "block";
                return;
            }
            try { sessionStorage.setItem(AUTH_KEY, "1"); } catch (e) {}
            showDashboard();
        });

        logoutBtn?.addEventListener("click", () => {
            try { sessionStorage.removeItem(AUTH_KEY); } catch (e) {}
            showLogin();
        });
    </script>
</body>
</html>
